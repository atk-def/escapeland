---
import { PortableText as PortableTextInternal } from 'astro-portabletext'
import PortableTextImage from './PortableTextImage.astro'
import PortableTextLink from './PortableTextLink.astro'
import CodeBlock from './CodeBlock.astro'
import type {
  PortableTextProps,
  PortableTextComponents,
} from 'astro-portabletext/types'
import '~/styles/portable-text.css'
import { cn } from '~/utils/style-related'

interface Props extends PortableTextProps {
  class?: string
}

const components: Partial<PortableTextComponents> = {
  type: {
    image: PortableTextImage,
    codeBlock: CodeBlock,
  },
  mark: {
    link: PortableTextLink,
  },
}

const { class: className, ...rest } = Astro.props
---

<PortableTextInternal
  class={cn('portable-text', className)}
  components={components}
  {...rest}
/>
