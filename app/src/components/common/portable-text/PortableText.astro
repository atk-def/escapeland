---
import { PortableText as PortableTextInternal } from 'astro-portabletext'
import PortableTextImage from './PortableTextImage.astro'
import PortableTextLink from './PortableTextLink.astro'
import CodeBlock from './CodeBlock.astro'
import type { PortableTextProps } from 'astro-portabletext/types'
import '~/styles/portable-text.css'
import clsx from 'clsx'

interface Props extends PortableTextProps {
  class?: string
}

const components = {
  type: {
    image: PortableTextImage,
    codeBlock: CodeBlock,
  },
  mark: {
    link: PortableTextLink,
  },
}

const { class: className, ...rest } = Astro.props
---

<PortableTextInternal
  class={clsx('portable-text', className)}
  components={components}
  {...rest}
/>
