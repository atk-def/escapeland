---
import { runQuery } from '~/sanity/run-query'
import PortableText from '~/components/PortableText.astro'
import DefaultLayout from '~/components/DefaultLayout.astro'
import { postQuery } from '~/sanity/queries/post'

export async function getStaticPaths() {
  const posts = await runQuery(postQuery)
  return posts.map((post) => {
    return {
      params: {
        slug: post.slug || '',
      },
      props: { ...post },
    }
  })
}

const { publishedAt, title, body } = Astro.props
---

<DefaultLayout title={`${title} | BLOG`}>
  <span class="text-sm">{publishedAt}</span>
  <h1 class="text-2xl font-bold mb-4">{title}</h1>
  <PortableText value={body} />
</DefaultLayout>
